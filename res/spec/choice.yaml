- state: door open
- state: shown intro message

- verbs:
  - goto
  - pickup
  - talkto
  - lookat
  - use

- location: test
  description:
    You are in the test place...
    There is a door leading to the back room...

  destinations:
  - back room

  leave:
  - if-not-state: door open
    then-fail: The door is locked

  enter:
  - if-not-state: shown intro message
    then:
    - set: shown intro message
    - Welcome to the game.

- location: back room
  description:
    You are in the back room...

  destinations:
  - test

- thing: lever
  description:
  - if-state: door open
    then: There is a mysterious *lever* on the wall pointing up.
    else: There is a mysterious *lever* on the wall.

  location: test
  use:
  - spawn: what

  talkto:
  - spawn: lever convo

  lookat: It looks like a lever

  pickup:
  - fail: Can't pick it up

- thing: ball
  location: test
  stage_name: a ball
  lookat:
    it is a ball

- choice: lever convo
  description:
    Hello says the lever
  alternatives:
  - label: Hello to you too
  - label: Wassup

- choice: what
  description: what do you want to do
  alternatives:
  - label: pull lever up
    do:
    - set: door open
    - The door clicks with a satisfying click..

  - label: pull lever down
    do:
      Nothing interesting happens...
